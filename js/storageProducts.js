var storageProducts = [
    {
        id: 1,
        name: "Tụ quạt CBB61",
        local: "Kệ 3 - tầng 1",
    },
    {
        id: 2,
        name: "Tụ CBB 630 475J",
        local: "Kệ 1 - tầng 2",
    },
    {
        id: 2,
        name: "Quạt tản nhiệt 24V 12x12x2.5 Dưới nhà",
        local: "???",
        image: "./img/3.jpg",
    },
    {
        id: 2,
        name: "Triac DB3",
        local: "Kệ 1 - tầng 2",
        image: "./img/1.jpg",
    },
    {
        id: 2,
        name: "Ổ cắm điện nồi cơm 3 chân đồng màu đen trắng chất lượng cao.",
        local: "Kệ 1 - tầng 2",
        image: "./img/4.jpg",
    },
    {
        id: 2,
        name: "Tụ bếp từ",
        local: "Kệ 1 - tầng 2",
        image: "./img/5.jpg",
    },
    {
        id: 2,
        name: "Lưới bảo vệ quạt an toàn",
        local: "Kệ giữa - tầng 2",
        image: "./img/6.jpg",
    },
    {
        id: 2,
        name: "Đế gác mỏ hàn Hakko",
        local: "Kệ trong - gần cửa",
        image: "./img/7.jpg",
    },
    {
        id: 2,
        name: "Công tắc 6x6x5",
        local: "Kệ giữa số 1 - tầng 2",
        image: "./img/8.jpg",
    },
    {
        id: 2,
        name: "Cảm biến nhiệt bếp từ",
        local: "Kệ trong số 1 - tầng 1",
        image: "./img/9.jpg",
    },
    {
        id: 2,
        name: "Mạch nguồn xung mini 12V 400mA",
        local: "Kệ trong số 1 - tầng 4",
        image: "./img/10.jpg",
    },
    {
        id: 2,
        name: "kìm",
        local: "Kệ trong số 1 - tầng 3",
        image: "./img/11.jpg",
    },
    {
        id: 2,
        name: "Jack nguồn AC 3 chân 16A",
        local: "Kệ trong số 2 - tầng 2",
        image: "./img/12.jpg",
    },
    {
        id: 2,
        name: "Chặn lồng quạt",
        local: "Kệ trong số 1 - gần công tắc",
        image: "./img/13.jpg",
    },
    {
        id: 2,
        name: "Hút thiếc chì hàn mini ",
        local: "Kệ trong số 1 - tầng 2",
        image: "./img/15.jpg",
    },
    {
        id: 2,
        name: "Tụ bếp từ",
        local: "Kệ 1 tầng 2",
        image: "./img/5.jpg",
    },
    {
        id: 2,
        name: "Tụ bếp từ",
        local: "Kệ 1 tầng 2",
        image: "./img/5.jpg",
    },
    {
        id: 2,
        name: "Tụ bếp từ",
        local: "Kệ 1 tầng 2",
        image: "./img/5.jpg",
    },
    {
        id: 2,
        name: "Tụ bếp từ",
        local: "Kệ 1 tầng 2",
        image: "./img/5.jpg",
    },
    {
        id: 2,
        name: "Tụ bếp từ",
        local: "Kệ 1 tầng 2",
        image: "./img/5.jpg",
    },
    {
        id: 2,
        name: "Tụ bếp từ",
        local: "Kệ 1 tầng 2",
        image: "./img/5.jpg",
    },
    {
        id: 2,
        name: "Tụ bếp từ",
        local: "Kệ 1 tầng 2",
        image: "./img/5.jpg",
    },
    {
        id: 2,
        name: "Tụ bếp từ",
        local: "Kệ 1 tầng 2",
        image: "./img/5.jpg",
    },
    {
        id: 2,
        name: "Tụ bếp từ",
        local: "Kệ 1 tầng 2",
        image: "./img/5.jpg",
    },
    {
        id: 2,
        name: "Tụ bếp từ",
        local: "Kệ 1 tầng 2",
        image: "./img/5.jpg",
    },
    {
        id: 2,
        name: "Tụ bếp từ",
        local: "Kệ 1 tầng 2",
        image: "./img/5.jpg",
    },
    {
        id: 2,
        name: "Tụ bếp từ",
        local: "Kệ 1 tầng 2",
        image: "./img/5.jpg",
    },
    {
        id: 2,
        name: "Tụ bếp từ",
        local: "Kệ 1 tầng 2",
        image: "./img/5.jpg",
    },
    {
        id: 2,
        name: "Tụ bếp từ",
        local: "Kệ 1 tầng 2",
        image: "./img/5.jpg",
    },
    {
        id: 2,
        name: "Tụ bếp từ",
        local: "Kệ 1 tầng 2",
        image: "./img/5.jpg",
    },
    {
        id: 2,
        name: "Tụ bếp từ",
        local: "Kệ 1 tầng 2",
        image: "./img/5.jpg",
    },
    {
        id: 2,
        name: "Tụ bếp từ",
        local: "Kệ 1 tầng 2",
        image: "./img/5.jpg",
    },
    {
        id: 2,
        name: "Tụ bếp từ",
        local: "Kệ 1 tầng 2",
        image: "./img/5.jpg",
    },
    {
        id: 2,
        name: "Tụ bếp từ",
        local: "Kệ 1 tầng 2",
        image: "./img/5.jpg",
    },
    {
        id: 2,
        name: "Tụ bếp từ",
        local: "Kệ 1 tầng 2",
        image: "./img/5.jpg",
    },
    {
        id: 2,
        name: "Tụ bếp từ",
        local: "Kệ 1 tầng 2",
        image: "./img/5.jpg",
    },
    {
        id: 2,
        name: "Tụ bếp từ",
        local: "Kệ 1 tầng 2",
        image: "./img/5.jpg",
    },
];
var storageList = document.querySelector(".search-inner-storage .list");
var storageFilter = document.querySelector(".search-inner-storage .filter");
var storageInput = document.querySelector(".search-inner-storage input");
var storageFormatText = document.querySelector(
    ".search-inner-storage .information"
);

// Auto focus()
storageInput.focus();

// Display product information
let storageProductFIlter = [];
function storageShowProducts(storageProductFIlter) {
    storageList.innerHTML = "";
    storageProductFIlter.forEach(function (item) {
        let newItem = document.createElement("div");
        let span = document.createElement("span");
        let imgDiv = document.createElement("div");

        imgDiv.className = "picture";
        newItem.classList.add("item");
        span.innerHTML = `${item.name}  <hr>------>  <span class='local-text'>${item.local}</span></hr>`;

        imgDiv.innerHTML = `<img src="${item.image}" alt="" class='component-picture'>`;

        newItem.appendChild(span);
        storageList.appendChild(newItem);
        storageList.append(imgDiv);
    });
}
storageShowProducts(storageProductFIlter);

storageFilter.addEventListener("submit", storageSubmitResult);
function storageSubmitResult(e) {
    e.preventDefault();
    let valueFilter = e.target.elements.name.value.toLowerCase();
    storageProductFIlter = storageProducts.filter(function (item) {
        if (valueFilter === "") {
            return false;
        }
        return item.name.toLowerCase().includes(valueFilter);
    });
    storageShowProducts(storageProductFIlter);
}

// format Text after clicking to Trung Tuyển text
storageFormatText.addEventListener("click", function () {
    storageFormat();
});
// format content
var storageFormat = function () {
    storageInput.value = "";
    storageList.innerHTML = "";
    storageInput.focus();
};

storageBtn.addEventListener("click", function () {
    searchInnerBackground.style.display = "block";
    searchInnerStorageBackground.style.display = "none";
    storageFormat();
});

// Search by my voice
// const speechRecognition =
//     window.speechRecognition || window.webkitSpeechRecognition;

if (speechRecognition) {
    const storageMicBtn = document.querySelector(
        ".search-inner-storage .mic-btn"
    );
    const storageMicIcon = document.querySelector(
        ".search-inner-storage .mic-btn i"
    );
    const status = document.querySelector(".status");

    const storageRecognition = new speechRecognition();
    storageRecognition.lang = "vi-VN";

    storageMicBtn.addEventListener("click", storageVoiceBtnClick);
    function storageVoiceBtnClick(e) {
        if (storageMicIcon.classList.contains("fa-microphone")) {
            e.preventDefault();
            storageRecognition.start();

            storageInput.value = "";
            storageList.innerHTML = "";
        } else {
            storageRecognition.stop();
        }
    }

    storageRecognition.addEventListener("start", startSpeechRecognition);
    function startSpeechRecognition() {
        storageMicIcon.classList.remove("fa-microphone");
        storageMicIcon.classList.add("fa-microphone-slash");
        status.classList.add("show");
        status.classList.add("position");
    }

    storageRecognition.addEventListener("end", endSpeechRecognition);
    function endSpeechRecognition() {
        storageMicIcon.classList.remove("fa-microphone-slash");
        storageMicIcon.classList.add("fa-microphone");
        status.classList.remove("show");
        status.classList.remove("position");
    }

    storageRecognition.addEventListener("result", resultSpeechRecognition);
    function resultSpeechRecognition(e) {
        const transcript = e.results[0][0].transcript.trim().toLowerCase();
        console.log(transcript);
        storageInput.value = transcript;
        storageSubmitResult({
            preventDefault: () => {},
            target: { elements: { name: { value: transcript } } },
        });
    }
}
